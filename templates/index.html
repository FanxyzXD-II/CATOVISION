<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Catovision AI meme on PAXI</title>
  <style>
    /* CSS ASLI ANDA DI PERTAHANKAN */
    :root { --bg:#020617; --card:#0f172a; --text:#f8fafc; --accent:#38bdf8; --border:#1e293b; }
    * { box-sizing: border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding-bottom: 50px; }
    .nav-bar { display: flex; justify-content: flex-start; overflow-x: auto; white-space: nowrap; gap: 12px; padding: 15px; background: var(--card); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 100; scrollbar-width: none; }
    .nav-item { cursor: pointer; padding: 10px 20px; border-radius: 14px; transition: 0.3s; font-weight: bold; flex-shrink: 0; font-size: 14px; }
    .nav-item.active { background: var(--accent); color: #020617; }
    .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
    .section { display: none; animation: fadeIn 0.5s ease; }
    .section.active { display: block; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 24px; text-align: center; }
    .cat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }
    .cat-card { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
    .cat-card img { width: 100%; height: 150px; object-fit: cover; }
    input, button { width: 100%; margin: 10px 0; padding: 14px; border-radius: 12px; border: 1px solid var(--border); font-size: 15px; outline: none; }
    input { background: #ffffff; color: #1e293b; }
    button { background: var(--accent); color: #020617; font-weight: bold; border: none; cursor: pointer; transition: 0.2s; }
    
    /* STYLE TAMBAHAN UNTUK LIST RESOLUSI */
    .btn-res { background: #1e293b; color: white; display: flex; justify-content: space-between; border: 1px solid var(--border); margin-bottom: 8px; }
    .btn-mp3 { background: #22c55e; color: white; }
    #loading { margin: 10px; color: var(--accent); display: none; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>

<div class="nav-bar">
    <div class="nav-item active" onclick="showTab(event, 'home')">üè† Home</div>
    <div class="nav-item" onclick="showTab(event, 'clear')">‚ú® Photo Enhancer</div>
    <div class="nav-item" onclick="showTab(event, 'dl')">üé¨ Downloader</div>
</div>

<div class="container">
    <div id="home" class="section active">
        <div class="card">
            <img src="/static/uploads/100003748.jpg" style="width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--accent); object-fit: cover; margin-bottom: 15px;">
            <h1>$CATON</h1>
            <p>The first meme coin on paxi ecosystem L1 with real utility tools Artificial Intelegent</p>
            <div style="background: #1e293b; padding: 10px; border-radius: 8px; font-family: monospace; word-break: break-all;">CA: Soon!!</div>
            
            <div style="margin-top: 15px;">
                <a href="https://t.me/+Vr2EQmXy66w0YzM1" target="_blank" style="text-decoration: none;">
                    <button class="btn-tg">Join Telegram Community</button>
                </a>
            </div>
        </div>
        
        <h3 style="margin-top: 30px;">üñºÔ∏è Cat Collection Gallery</h3>
        <div class="cat-grid">
            {% for cat in cats %}
            <div class="cat-card">
                <img src="/static/uploads/{{ cat.img }}">
                <div style="padding: 10px; font-size: 12px; text-align: center;">{{ cat.name }}</div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div id="clear" class="section">
        <div class="card">
            <h2>‚ú® AI Photo Enhancer</h2>
            <form action="/enhance" method="post" enctype="multipart/form-data">
                <input type="file" name="photo" accept="image/*" required style="background: #1e293b; color: white;">
                <button type="submit">Proses & Download</button>
            </form>
        </div>
    </div>

    <div id="dl" class="section">
        <div class="card">
            <h2>üé¨ AI Downloader</h2>
            <input id="videoUrl" type="url" placeholder="Paste link (YouTube/TikTok)" required>
            <button id="btnFetch" onclick="fetchFormats()">Cek Resolusi Video</button>
            
            <div id="loading">‚è≥ Menyiapkan pilihan format...</div>

            <div id="resultArea" style="display:none; margin-top: 20px; text-align: left;">
                <img id="vidThumb" src="" style="width: 100%; border-radius: 12px; margin-bottom: 10px;">
                <h4 id="vidTitle" style="margin-bottom: 15px; font-size: 14px;"></h4>
                <div id="formatList"></div>
            </div>
        </div>
    </div>
</div>

<script>
function showTab(e, id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    e.currentTarget.classList.add('active');
}

async function fetchFormats() {
    const url = document.getElementById('videoUrl').value;
    const loading = document.getElementById('loading');
    const resultArea = document.getElementById('resultArea');
    const formatList = document.getElementById('formatList');

    if(!url) return alert("Tempel link video!");

    loading.style.display = 'block';
    resultArea.style.display = 'none';
    formatList.innerHTML = '';

    try {
        const formData = new FormData();
        formData.append('url', url);

        const response = await fetch('/get-info', { method: 'POST', body: formData });
        const data = await response.json();
        if(data.error) throw new Error(data.error);

        document.getElementById('vidThumb').src = data.thumbnail;
        document.getElementById('vidTitle').innerText = data.title;

        // Tombol Video per resolusi
        data.formats.forEach(f => {
            const btn = document.createElement('button');
            btn.className = 'btn-res';
            btn.innerHTML = `<span>üé¨ ${f.resolution}</span> <span>${f.size}</span>`;
            btn.onclick = () => window.open(f.url, '_blank');
            formatList.appendChild(btn);
        });

        // Tombol MP3
        if(data.audio_url) {
            const btnA = document.createElement('button');
            btnA.className = 'btn-mp3';
            btnA.innerHTML = `üéµ Download Audio (MP3)`;
            btnA.onclick = () => window.open(data.audio_url, '_blank');
            formatList.appendChild(btnA);
        }

        resultArea.style.display = 'block';
    } catch (e) {
        alert("Gagal: " + e.message);
    } finally {
        loading.style.display = 'none';
    }
}
</script>
</body>
</html>



